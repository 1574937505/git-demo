# 灵魂交友项目开发待办清单

> 基于产品需求文档拆分的可执行开发计划
> 创建日期：2025-12-28

---

## 开发阶段概览

| 阶段 | 模块 | 状态 |
|------|------|------|
| 第一阶段（MVP） | 基础设施、用户服务、匹配服务(基础)、消息服务(基础)、安全审核 | 待开始 |
| 第二阶段（增强） | 匹配服务(AI)、内容社区、广告变现 | 待开始 |
| 第三阶段（完整） | 音视频通话、运营管理、Web端、数据平台 | 待开始 |

---

## 第一阶段：MVP版本

### 模块一：基础设施模块

#### 1.1 项目骨架搭建
- [ ] 创建 Spring Boot 3.x 多模块项目结构
- [ ] 配置 Maven/Gradle 父子模块依赖管理
- [ ] 创建公共模块 (common)
- [ ] 创建用户服务模块 (user-service)
- [ ] 创建匹配服务模块 (match-service)
- [ ] 创建消息服务模块 (message-service)
- [ ] 配置多环境配置文件 (dev/test/prod)

#### 1.2 API网关
- [ ] 引入 Spring Cloud Gateway 依赖
- [ ] 配置路由规则
- [ ] 实现全局限流（令牌桶/漏桶算法）
- [ ] 配置跨域处理
- [ ] 实现请求日志记录

#### 1.3 认证授权系统
- [ ] 引入 Spring Security 依赖
- [ ] 实现 JWT Token 生成与验证
- [ ] 实现 Token 刷新机制
- [ ] 配置安全过滤器链
- [ ] 实现登录/登出接口

#### 1.4 RBAC权限系统
- [ ] 设计并创建用户表 (sys_user)
- [ ] 设计并创建角色表 (sys_role)
- [ ] 设计并创建权限表 (sys_permission)
- [ ] 设计并创建用户角色关联表 (sys_user_role)
- [ ] 设计并创建角色权限关联表 (sys_role_permission)
- [ ] 实现权限注解 (@PreAuthorize)
- [ ] 初始化默认角色数据（超级管理员、普通管理员、运营、审核员、普通用户）

#### 1.5 通用组件
- [ ] 实现统一响应封装 (Result<T>)
- [ ] 实现全局异常处理器
- [ ] 实现参数校验框架集成
- [ ] 配置统一日志格式 (logback)
- [ ] 实现接口签名验证
- [ ] 实现 AOP 操作日志记录

#### 1.6 API文档
- [ ] 引入 Knife4j 依赖
- [ ] 配置 Swagger 文档信息
- [ ] 为各模块配置分组

#### 1.7 数据层基础
- [ ] 配置 MySQL 数据源
- [ ] 引入 MyBatis-Plus 并配置
- [ ] 配置 Redis 连接池
- [ ] 实现 Redis 工具类
- [ ] 配置数据库连接池 (HikariCP)

---

### 模块二：用户服务模块

#### 2.1 注册登录
- [ ] 实现手机号+短信验证码注册
  - [ ] 集成短信 SDK（阿里云/腾讯云）
  - [ ] 实现验证码发送接口
  - [ ] 实现验证码校验逻辑
  - [ ] 实现注册接口
- [ ] 实现微信授权登录
  - [ ] 对接微信开放平台
  - [ ] 实现 OAuth 授权流程
  - [ ] 实现用户绑定/创建逻辑
- [ ] 实现 QQ 授权登录
- [ ] 实现 Apple ID 登录（iOS）
- [ ] 实现账号密码登录
- [ ] 实现登录设备管理

#### 2.2 个人资料
- [ ] 设计用户资料表 (user_profile)
- [ ] 实现基础信息 CRUD
  - [ ] 昵称（2-12字符校验）
  - [ ] 性别
  - [ ] 生日/年龄计算
  - [ ] 所在城市
  - [ ] 职业
  - [ ] 学历
  - [ ] 个性签名（100字限制）
- [ ] 实现头像上传
  - [ ] 集成 OSS 存储
  - [ ] 实现图片压缩
  - [ ] 支持系统默认头像
- [ ] 实现照片墙功能
  - [ ] 最多9张限制
  - [ ] 照片权限设置（公开/仅好友/仅自己）
  - [ ] 照片模糊化功能

#### 2.3 灵魂标签系统
- [ ] 设计标签表 (tag)
- [ ] 设计用户标签关联表 (user_tag)
- [ ] 初始化标签分类数据
  - [ ] 性格特点
  - [ ] 兴趣爱好
  - [ ] 生活方式
  - [ ] 恋爱观
  - [ ] 价值观
- [ ] 实现标签选择接口（最多20个）
- [ ] 实现自定义标签创建
- [ ] 实现标签热度统计

#### 2.4 实名认证
- [ ] 设计认证记录表 (user_certification)
- [ ] 实现手机号认证
- [ ] 实现身份证认证
  - [ ] 集成 OCR 识别接口
  - [ ] 集成人脸识别接口
- [ ] 实现学历认证
  - [ ] 学信网验证对接
  - [ ] 毕业证上传审核
- [ ] 实现职业认证
  - [ ] 工作证明上传
  - [ ] 人工审核流程

#### 2.5 账号管理
- [ ] 实现登录设备列表
- [ ] 实现异常登录检测与提醒
- [ ] 实现密码修改
- [ ] 实现账号申诉与找回
- [ ] 实现数据导出功能
- [ ] 实现账号注销功能

---

### 模块三：匹配服务模块（基础）

#### 3.1 性格测试系统
- [ ] 设计题目表 (test_question)
- [ ] 设计选项表 (test_option)
- [ ] 设计测试结果表 (test_result)
- [ ] 设计用户测试记录表 (user_test_record)

##### 3.1.1 MBTI性格测试
- [ ] 导入93道标准测试题
- [ ] 实现测试题目获取接口
- [ ] 实现答题提交接口
- [ ] 实现 MBTI 结果计算算法
- [ ] 实现16种人格类型结果展示
- [ ] 实现重新测试限制（每月1次）

##### 3.1.2 恋爱风格测试
- [ ] 导入30道恋爱风格测试题
- [ ] 实现依恋类型计算（安全型/焦虑型/回避型/恐惧型）
- [ ] 实现恋爱建议生成

##### 3.1.3 价值观测试
- [ ] 导入20道情景选择题
- [ ] 实现价值观画像生成（金钱观/家庭观/事业观/社交观）

#### 3.2 兴趣标签匹配
- [ ] 设计标签体系（音乐/影视/阅读/运动/游戏/旅行/美食/艺术等）
- [ ] 实现标签相似度计算算法
- [ ] 实现标签权重配置
- [ ] 实现相似度阈值过滤（≥60%）

#### 3.3 基础匹配推荐
- [ ] 设计匹配记录表 (match_record)
- [ ] 实现用户推荐列表接口
- [ ] 实现筛选条件
  - [ ] 性别筛选
  - [ ] 年龄范围筛选
  - [ ] 地区筛选
  - [ ] 在线状态筛选
  - [ ] 认证状态筛选
- [ ] 实现左滑/右滑接口
- [ ] 实现双向匹配成功逻辑
- [ ] 实现匹配成功通知

#### 3.4 问答互动匹配
- [ ] 设计灵魂问题表 (soul_question)
- [ ] 设计用户回答表 (user_answer)
- [ ] 导入500+精选深度问题
- [ ] 实现每日问题推送（3题/天）
- [ ] 实现回答提交接口
- [ ] 实现查看他人回答接口
- [ ] 实现回答点赞/评论功能

---

### 模块四：消息服务模块（基础）

#### 4.1 IM基础架构
- [ ] 引入 Netty 依赖
- [ ] 实现 WebSocket 长连接服务
- [ ] 实现连接认证
- [ ] 实现心跳机制
- [ ] 实现断线重连

#### 4.2 消息系统
- [ ] 设计消息表 (message) - MongoDB
- [ ] 设计会话表 (conversation)
- [ ] 实现消息类型
  - [ ] 文字消息（支持emoji）
  - [ ] 图片消息
  - [ ] 语音消息（最长60秒）
  - [ ] 位置消息
  - [ ] 名片分享
  - [ ] 灵魂问题消息
- [ ] 实现消息发送接口
- [ ] 实现消息接收推送
- [ ] 实现消息已读状态
- [ ] 实现消息撤回（2分钟内）

#### 4.3 会话管理
- [ ] 实现会话列表接口
- [ ] 实现会话未读数统计
- [ ] 实现聊天记录查询
- [ ] 实现聊天记录搜索
- [ ] 实现消息免打扰设置
- [ ] 实现拉黑功能

#### 4.4 破冰机制
- [ ] 实现双向匹配才能聊天限制
- [ ] 实现系统推荐破冰话题
- [ ] 实现24小时有效期（首次聊天）
- [ ] 实现超时自动关闭会话

---

### 模块五：安全审核模块

#### 5.1 内容审核
- [ ] 集成阿里云/腾讯云内容安全 API
- [ ] 实现文本自动审核
- [ ] 实现图片自动审核
- [ ] 实现人工复审流程
- [ ] 设计审核记录表 (audit_record)

#### 5.2 敏感词过滤
- [ ] 实现 DFA 敏感词过滤算法
- [ ] 建立敏感词库
- [ ] 实现敏感词动态更新
- [ ] 实现实时文本过滤

#### 5.3 举报系统
- [ ] 设计举报表 (report)
- [ ] 实现举报提交接口
- [ ] 举报类型：色情低俗/骚扰辱骂/虚假信息/诈骗/未成年人/其他
- [ ] 实现举报处理流程
- [ ] 实现举报结果通知

#### 5.4 处罚机制
- [ ] 设计处罚记录表 (punishment)
- [ ] 实现警告处罚
- [ ] 实现禁言处罚（1-7天）
- [ ] 实现封禁处罚（30天/永久）
- [ ] 实现处罚自动解除（定时任务）

#### 5.5 隐私保护
- [ ] 实现隐身模式
- [ ] 实现黑名单功能
- [ ] 实现位置隐藏
- [ ] 实现在线状态隐藏
- [ ] 实现照片权限控制
- [ ] 实现用户数据加密存储

---

## 第二阶段：增强版本

### 模块六：匹配服务模块（AI增强）

#### 6.1 AI智能匹配
- [ ] 搭建用户画像系统
- [ ] 实现用户行为数据采集
  - [ ] 浏览行为
  - [ ] 点赞行为
  - [ ] 聊天时长
- [ ] 实现协同过滤推荐算法
- [ ] 实现知识图谱关联分析
- [ ] 实现实时匹配策略调整

#### 6.2 匹配结果优化
- [ ] 实现灵魂契合度计算（百分比）
- [ ] 实现多维度契合分析（性格/兴趣/价值观）
- [ ] 实现共同点自动提取
- [ ] 实现聊天话题智能推荐

#### 6.3 更多性格测试
- [ ] 实现后台测试配置化
- [ ] 支持定期更新趣味测试
- [ ] 实现测试结果分享功能

---

### 模块七：内容社区模块

#### 7.1 灵魂广场
- [ ] 设计动态表 (post) - MongoDB
- [ ] 实现动态发布
  - [ ] 文字动态（最多500字）
  - [ ] 图片动态（最多9张）
  - [ ] 问答卡片分享
  - [ ] 音乐分享（网易云/QQ音乐）
- [ ] 实现动态列表接口
- [ ] 实现动态详情接口
- [ ] 实现动态删除

#### 7.2 互动功能
- [ ] 实现点赞功能
- [ ] 实现评论功能（支持二级评论）
- [ ] 实现分享到聊天
- [ ] 实现收藏功能
- [ ] 实现@功能

#### 7.3 信息流
- [ ] 实现推荐算法
- [ ] 实现关注流
- [ ] 实现热门内容排序
- [ ] 实现内容去重

---

### 模块八：广告变现模块

#### 8.1 广告位管理
- [ ] 设计广告位配置表 (ad_slot)
- [ ] 实现开屏广告位
- [ ] 实现信息流广告位（每10条1条）
- [ ] 实现 Banner 广告位
- [ ] 实现插屏广告位（每3次匹配1次）

#### 8.2 广告SDK集成
- [ ] 集成穿山甲 SDK
- [ ] 集成广点通 SDK
- [ ] 集成百度联盟 SDK
- [ ] 实现广告瀑布流加载

#### 8.3 激励视频
- [ ] 实现观看广告获得额外推荐次数
- [ ] 实现观看广告查看谁对我感兴趣
- [ ] 实现观看广告获得超级喜欢
- [ ] 实现观看广告解锁更多资料

#### 8.4 广告统计
- [ ] 实现广告曝光统计
- [ ] 实现广告点击统计
- [ ] 实现 eCPM 计算
- [ ] 实现广告收入报表

---

## 第三阶段：完整版本

### 模块九：音视频通话模块

#### 9.1 语音通话
- [ ] 集成 TRTC/声网 SDK
- [ ] 实现一对一语音通话
- [ ] 实现通话时长统计
- [ ] 实现通话中发消息

#### 9.2 视频通话
- [ ] 实现一对一视频通话
- [ ] 实现视频模糊滤镜
- [ ] 实现仅语音模式切换
- [ ] 实现通话录音（需双方同意）

---

### 模块十：运营管理模块

#### 10.1 管理后台
- [ ] 搭建 Vue + Element UI 后台框架
- [ ] 实现用户管理页面
- [ ] 实现角色管理页面
- [ ] 实现权限管理页面
- [ ] 实现内容审核页面
- [ ] 实现举报处理页面
- [ ] 实现数据统计页面

#### 10.2 消息推送
- [ ] 集成极光/个推 SDK
- [ ] 实现匹配通知推送
- [ ] 实现消息通知推送
- [ ] 实现互动通知推送（合并，每小时最多1次）
- [ ] 实现活动通知推送（每天最多1次）
- [ ] 实现召回通知（沉默超3天，每周最多2次）

#### 10.3 运营活动
- [ ] 设计活动配置表 (activity)
- [ ] 实现每日签到
- [ ] 实现新用户引导任务
- [ ] 实现节日主题活动
- [ ] 实现话题讨论活动

#### 10.4 数据统计
- [ ] 搭建 Kafka + ClickHouse 数据管道
- [ ] 实现 DAU/MAU 统计
- [ ] 实现用户留存率统计（次日/7日/30日）
- [ ] 实现平均使用时长统计
- [ ] 实现匹配成功率统计
- [ ] 实现消息发送量统计
- [ ] 实现广告收入统计
- [ ] 实现数据可视化大屏

---

### 模块十一：Web端

- [ ] 搭建响应式 Web 前端框架
- [ ] 实现 PC 端适配
- [ ] 实现平板端适配
- [ ] 与移动端功能对齐

---

## 非功能性需求待办

### 性能优化
- [ ] 页面加载时间 ≤2秒
- [ ] API响应时间 ≤200ms (P99)
- [ ] 消息送达延迟 ≤500ms
- [ ] 系统可用性 ≥99.9%
- [ ] 支持10万+并发用户

### 安全加固
- [ ] 全站 HTTPS 配置
- [ ] 用户密码 BCrypt 加密
- [ ] 敏感数据 AES 加密
- [ ] API 接口签名验证
- [ ] SQL 注入防护
- [ ] XSS 攻击防护
- [ ] 接口频率限制

### 合规检查
- [ ] 符合《个人信息保护法》
- [ ] 符合《网络安全法》
- [ ] 准备应用商店审核材料
- [ ] 编写用户协议
- [ ] 编写隐私政策
- [ ] 实现未成年人保护机制

---

## 进度跟踪

| 模块 | 总任务数 | 已完成 | 进度 |
|------|----------|--------|------|
| 基础设施模块 | 28 | 0 | 0% |
| 用户服务模块 | 35 | 0 | 0% |
| 匹配服务模块(基础) | 32 | 0 | 0% |
| 消息服务模块(基础) | 24 | 0 | 0% |
| 安全审核模块 | 22 | 0 | 0% |
| 匹配服务模块(AI) | 12 | 0 | 0% |
| 内容社区模块 | 18 | 0 | 0% |
| 广告变现模块 | 16 | 0 | 0% |
| 音视频通话模块 | 8 | 0 | 0% |
| 运营管理模块 | 24 | 0 | 0% |
| Web端 | 4 | 0 | 0% |
| 非功能性需求 | 18 | 0 | 0% |
| **总计** | **241** | **0** | **0%** |

---

## 更新记录

| 日期 | 更新内容 | 更新人 |
|------|----------|--------|
| 2025-12-28 | 初始化待办清单 | - |
